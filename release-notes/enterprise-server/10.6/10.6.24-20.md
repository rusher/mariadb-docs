---
description: >-
  MariaDB Enterprise Server 11.6.24-20 is a Stable (GA) maintenance release of
  MariaDB Enterprise Server 10.6, released on
hidden: true
---

# Release Notes for MariaDB Enterprise Server 10.6.24-20

{% include "../../.gitbook/includes/unreleased-es-10.6.md" %}

<a href="https://mariadb.com/downloads/enterprise/enterprise-server/" class="button primary">Download</a> <a href="10.6.24-20.md" class="button secondary">Release Notes</a> <a href="changelog-10.6.24-20.md" class="button secondary">Changelog</a> <a href="whats-new.md" class="button secondary">Overview of Enterprise Server 10.6</a>

**Release date:** ?

MariaDB Enterprise Server 10.6.24-20 is a maintenance release of [MariaDB Enterprise Server 10.6](whats-new.md). This release includes a variety of fixes.

## Backports

* Two new fields are available via `SHOW REPLICA STATUS` ([MENT-2129](https://jira.mariadb.org/browse/MENT-2129))
  1. `Connects_Tried`, which provides the number of attempts the replica has made to connect to the primary, and
  2. `Master_Retry_Count`, which provides the number of times the replica will attempt to connect to a primary before giving up.

## Changes in Storage Engines <a href="#changes-in-storage-engines" id="changes-in-storage-engines"></a>

* This release incorporates MariaDB ColumnStore engine version 23.10.6

## Notable changes <a href="#notable-changes" id="notable-changes"></a>

* [Galera](https://app.gitbook.com/o/diTpXxF5WsbHqTReoBsS/s/3VYeeVGUV4AMqrA3zwy7/) updated to 26.4.24
  * NOTE: Includes increasing the GCS protocol version, which prevents downgrades of individual nodes in the cluster as soon as all nodes have been updated
* Due to the impending EOL of Windows 10 22H2, and Windows 11 23H2, this will be the last release supporting these releases
* The HashiCorp Key Management Plugin has been updated to provide robust stability against Vault communication failures:
  * The plugin is now configured to use cached keys for all communication errors (not just timeouts), ensuring continuous operation when the Vault server is temporarily unreachable.
  * The default setting for using the cache on errors is now `ON`.
  * The default key cache timeout ([hashicorp\_key\_management\_cache\_timeout](https://app.gitbook.com/s/SsmexDFPv2xG2OTyO5yV/security/securing-mariadb/encryption/data-at-rest-encryption/key-management-and-encryption-plugins/hashicorp-key-management-plugin#hashicorp-key-management-cache-timeout)) has been increased to its maximum practical value (e.g., one year in milliseconds), maximizing key availability in the cache during extended service interruptions. ([MENT-1582](https://jira.mariadb.org/browse/MENT-1582))<br>

## Issues Fixed <a href="#issues-fixed" id="issues-fixed"></a>

### Can result in hang or crash

* Assertion \`table\_share->tmp\_table != NO\_TMP\_TABLE || m\_lock\_type == 1' failed upon REBUILD PARTITION ([MDEV-20498](https://jira.mariadb.org/browse/MDEV-20498))
* Spider: Assertion \`inited==RND' failed in handler::ha\_rnd\_end on DELETE ([MDEV-26540](https://jira.mariadb.org/browse/MDEV-26540))
* Several bugs in SPATIAL INDEX page splitting logic could crash InnoDB if the PRIMARY KEY or the SPATIAL data is variable-length. ([MDEV-27675](https://jira.mariadb.org/browse/MDEV-27675))
* Server hang with innodb\_file\_per\_table=0, innodb\_undo\_tablespaces=0 ([MDEV-29930](https://jira.mariadb.org/browse/MDEV-29930))
* InnoDB could crash if the definition of the InnoDB persistent statistics tables were incorrect. ([MDEV-31740](https://jira.mariadb.org/browse/MDEV-31740))
* SIGSEGV in maria\_rtree\_split\_page | maria\_rtree\_add\_key ([MDEV-31766](https://jira.mariadb.org/browse/MDEV-31766))
* Server crash on cleanup of non-fully-constructed-due-to-an-error CTE ([MDEV-32308](https://jira.mariadb.org/browse/MDEV-32308))
* Mariadb server crashed during insert ([MDEV-36134](https://jira.mariadb.org/browse/MDEV-36134))
* InnoDB could potentially crash if there is any lock conflict on an internal FTS\_%\_CONFIG table of a FULLTEXT INDEX while one of the INFORMATION\_SCHEMA views INNODB\_TRX, INNODB\_LOCKS, or INNODB\_LOCK\_WAITS are being accessed. ([MDEV-36545](https://jira.mariadb.org/browse/MDEV-36545))
* Fixed crashing bug when inserting into a tables with several nextval(sequence) default values. ([MDEV-37172](https://jira.mariadb.org/browse/MDEV-37172))
* Inconsistency detected - create sequence ([MDEV-37366](https://jira.mariadb.org/browse/MDEV-37366))
* Parallel slave worker crashes During Backup at retrying ([MDEV-37453](https://jira.mariadb.org/browse/MDEV-37453))
* Fixed a problem where the server would crash with a segfault when trying to drop duplicate domain ids in the same command  ([MDEV-37885](https://jira.mariadb.org/browse/MDEV-37885)), e.g.\
  `FLUSH BINARY LOGS DELETE_DOMAIN_ID=(0), BINARY LOGS DELETE_DOMAIN_ID=(0)`
* Item\_func\_hex doesn't check for max\_allowed\_packet ([MDEV-37947](https://jira.mariadb.org/browse/MDEV-37947))
* MDL conflict between XA and DDL in Galera cluster ([MENT-2405](https://jira.mariadb.org/browse/MENT-2405))
* Cherry Pick MDEV-37541 - Race of rolling back and committing transaction to binlog ([MENT-2448](https://jira.mariadb.org/browse/MENT-2448))
* For large transactions (i.e. those whose data exceeds the binlog\_cache\_size limit and spills into tmp files), provides a general performance improvement and fixes a bug that would lead to binlog corruption where the large transaction would have its GTID written into the binary log, without any additional transaction data, if the server's --tmp-dir was full. ([MENT-2451](https://jira.mariadb.org/browse/MENT-2451))
* Backport fix for MDEV-36860 to ES 10.6 ([MENT-2463](https://jira.mariadb.org/browse/MENT-2463))
* With --encrypt-binlog=ON if a node fails to apply a writeset it will crash the whole cluster due to a bug in Galera library encryption handling. Fixed in Galera library. Concerns only Enterprise Server as only it enables Galera encryption, all versions: 10.5, 10.6, 11.4, 11.8 ([MENT-2474](https://jira.mariadb.org/browse/MENT-2474))

### Can result in unexpected behaviour

* ALTER TABLE could fail to update InnoDB persistent statistics. ([MDEV-35163](https://jira.mariadb.org/browse/MDEV-35163))
* ALTER TABLE tbl\_a ADD PARTITION (PARTITION pt2) MSAN uninitalized read ([MDEV-36723](https://jira.mariadb.org/browse/MDEV-36723))
* `mariadb-dump -T` did not encode table names like the server did for `frm` files, so some tables can be created in the server, but not dumped with `mariadb-dump -T`, for example, a table `con` on Windows. ([MDEV-37483](https://jira.mariadb.org/browse/MDEV-37483))
* CHECK TABLEâ€¦EXTENDED could flag bogus corruption on a column prefix index. ([MDEV-37659](https://jira.mariadb.org/browse/MDEV-37659))
* very long query cannot be killed quickly ([MDEV-37938](https://jira.mariadb.org/browse/MDEV-37938))
* If the server was killed during an operation that creates a .ibd file, such as TRUNCATE TABLE, it could fail to recover. ([MDEV-37994](https://jira.mariadb.org/browse/MDEV-37994))
* InnoDB partition table disallow local GTIDs ([MENT-2367](https://jira.mariadb.org/browse/MENT-2367))
* If the user specifies some tls-related parameters in spider table creation with odbc/mariadb backend (unlikely), these parameters could be ill-formatted in the odbc connection string, causing them to be ignored by the driver. ([MENT-2407](https://jira.mariadb.org/browse/MENT-2407))
* Cherry-Pick MDEV-37138 "innochecksum misinterprets doublewrite buffer pages" ([MENT-2459](https://jira.mariadb.org/browse/MENT-2459))
* Backport the fix for MDEV-34744 to Enterprise Server 10.6 ([MENT-2465](https://jira.mariadb.org/browse/MENT-2465))

### Related to install and upgrade

* A misplaced debug assertion could fail due to a race condition. In MariaDB Server 11.8.1, this bug had already been fixed as part of MDEV-35049. ([MDEV-20203](https://jira.mariadb.org/browse/MDEV-20203))
* \#2 Assertion \`binlog\_table\_maps == 0 || locked\_tables\_mode == LTM\_LOCK\_TABLES' failed in THD::reset\_for\_next\_command ([MDEV-22915](https://jira.mariadb.org/browse/MDEV-22915))
* InnoDB could crash after a DROP TABLE, TRUNCATE TABLE, OPTIMIZE TABLE or a table-rebuilding ALTER TABLE if innodb\_adaptive\_hash\_index entries existed in the table. ([MDEV-26599](https://jira.mariadb.org/browse/MDEV-26599))
* Spider dev documentation ([MDEV-30265](https://jira.mariadb.org/browse/MDEV-30265))
* Wrong results for self-touching shapes. ([MDEV-31499](https://jira.mariadb.org/browse/MDEV-31499))
* Assertion \`marked\_for\_read()' fails on slave upon RBR with binlog\_row\_image=MINIMAL ([MDEV-31678](https://jira.mariadb.org/browse/MDEV-31678))
* Recovery of Aria transactional tables did not work in big-endian machines like s390x and Sparc ([MDEV-34914](https://jira.mariadb.org/browse/MDEV-34914))
* UBSAN: runtime error: load of value 1341112147, which is not a valid value for type 'enum enum\_schema\_tables' in optimize\_for\_get\_all\_tables and get\_all\_tables and on SELECT from I\_S geometry\_columns ([MDEV-35713](https://jira.mariadb.org/browse/MDEV-35713))
* only mtr test has been fixed ([MDEV-36710](https://jira.mariadb.org/browse/MDEV-36710))
* Fix for unstable mtr test ([MDEV-36949](https://jira.mariadb.org/browse/MDEV-36949))
* galera.galera\_sst\_encrypted LeakSanitizer: detected memory leaks ([MDEV-37206](https://jira.mariadb.org/browse/MDEV-37206))
* SIGSEGV in srv\_printf\_innodb\_monitor ([MDEV-37360](https://jira.mariadb.org/browse/MDEV-37360))
* The minimum value of the parameter innodb\_ft\_min\_token\_size was increased to 1, similar to the parameter ft\_min\_word\_len. ([MDEV-37423](https://jira.mariadb.org/browse/MDEV-37423))
* decimal\_digits\_t trips GCC -Wconversion ([MDEV-37477](https://jira.mariadb.org/browse/MDEV-37477))
* It appears that some error conditions don't store error information in the Diagnostics\_area ([MDEV-37494](https://jira.mariadb.org/browse/MDEV-37494))
  * For example when table\_def::compatible\_with() check fails error message is stored in Relay\_log\_info instead.
  * This results in optimistically identical votes and zero error buffer size breaks wsrep-lib logic as it relies on error buffer size to decide whether voting took place.
  * To account for this, first try to obtain error info from Relay\_log\_info, then fallback to Diagnostics\_area. If that fails use some random data to distinguish this condition from success.
  * This requires bumping of the application protocol to 8 since vote message generation algorithm has changed.
* myisamchk -V crashes ([MDEV-37505](https://jira.mariadb.org/browse/MDEV-37505))
* galera.MDEV-26266 fails with ER\_OPTION\_PREVENTS\_STATEMENT with PS protocol ([MDEV-37618](https://jira.mariadb.org/browse/MDEV-37618))
* UBSAN: nullptr-with-nonzero-offset/pointer-overflow in row\_log\_apply\_ops ([MDEV-37626](https://jira.mariadb.org/browse/MDEV-37626))
* The parameter innodb\_trx\_rseg\_n\_slots\_debug was removed. ([MDEV-37672](https://jira.mariadb.org/browse/MDEV-37672))
* During workload after crash recovery, an incorrect (too large) innodb\_buffer\_pool\_pages\_dirty could be reported. ([MDEV-37677](https://jira.mariadb.org/browse/MDEV-37677))
* Galera-26.4.24 fails buid package due to galera\_check timeout on some s390x platforms ([MDEV-37691](https://jira.mariadb.org/browse/MDEV-37691))
* This only affects debug instrumented builds and tests that use the debug instrumentation. ([MDEV-37724](https://jira.mariadb.org/browse/MDEV-37724))
* Lock checks for secondary indexes were unnecessarily accessing some history and could access freed BLOB pages that correspond to column prefixes. ([MDEV-37753](https://jira.mariadb.org/browse/MDEV-37753))
* Backport "Systemd: Restart on OOM" fix to 10.6 ([MDEV-37780](https://jira.mariadb.org/browse/MDEV-37780))
* Threadpool - debug assertion thread\_group->active\_thread\_count >=0, from TP\_connection\_generic::wait\_begin ([MDEV-37902](https://jira.mariadb.org/browse/MDEV-37902))
* Merge applicable changes from InnoDB 8.4.7 ([MDEV-37922](https://jira.mariadb.org/browse/MDEV-37922))
* Most of server Audit v2 tests are disabled and never run ([MENT-1223](https://jira.mariadb.org/browse/MENT-1223))
* Some performance schema tests fail on builds without WSREP ([MENT-1944](https://jira.mariadb.org/browse/MENT-1944))
* Two new fields are available via SHOW REPLICA STATUS:
  * Connects\_Tried, which provides the number of attempts the replica has made to connect to the primary, and
  * Master\_Retry\_Count, which provides the number of times the replica will attempt to connect to a primary before giving up. ([MENT-2129](https://jira.mariadb.org/browse/MENT-2129))
* Wrong hardcoded default for GIT\_REMOTE\_ORIGIN\_URL in ES ([MENT-2393](https://jira.mariadb.org/browse/MENT-2393))
* Add the server option `--replicate-rewrite-db` to system variables and SHOW REPLICA STATUS (backport of MDEV-15530) ([MENT-2421](https://jira.mariadb.org/browse/MENT-2421))
* Backport MDEV-9804 "Implement a caching\_sha2\_password plugin" for MariaDB Enterprise Server 10.6 ([MENT-2480](https://jira.mariadb.org/browse/MENT-2480))

### Unexpected results

* Tested on 10.6.24, the issue is not reproducible anymore. ([MDEV-30456](https://jira.mariadb.org/browse/MDEV-30456))
* Replicated REPAIR TABLE writes an error in the log when normal REPAIR does not ([MDEV-33184](https://jira.mariadb.org/browse/MDEV-33184))
* Spider: XA COMMIT ONE PHASE fails with "This xid does not exist" ([MDEV-37829](https://jira.mariadb.org/browse/MDEV-37829))



## Installation Instructions <a href="#installation-instructions" id="installation-instructions"></a>

* [Deploy MariaDB Enterprise with Repositories](https://app.gitbook.com/s/SsmexDFPv2xG2OTyO5yV/server-management/install-and-upgrade-mariadb/installing-mariadb/binary-packages/mariadb-package-repository-setup-and-usage)
* [Deploy MariaDB Enterprise with Package Tarballs](https://app.gitbook.com/s/SsmexDFPv2xG2OTyO5yV/server-management/install-and-upgrade-mariadb/installing-mariadb/binary-packages/package-tarballs)
* [Deploy MariaDB Enterprise with Docker](https://app.gitbook.com/s/SsmexDFPv2xG2OTyO5yV/server-management/automated-mariadb-deployment-and-administration/docker-and-mariadb/deploy-mariadb-enterprise-server-with-docker)

## Upgrade Instructions <a href="#upgrade-instructions" id="upgrade-instructions"></a>

* [Upgrade to MariaDB Enterprise Server 10.6](https://app.gitbook.com/s/SsmexDFPv2xG2OTyO5yV/server-management/install-and-upgrade-mariadb/installing-enterprise-server/mariadb-enterprise-server-upgrade-paths/mariadb-enterprise-server-10.6/upgrade-to-mariadb-enterprise-server-10.6)

{% include "https://app.gitbook.com/s/SsmexDFPv2xG2OTyO5yV/~/reusable/pNHZQXPP5OEz2TgvhFva/" %}

{% @marketo/form formid="4316" formId="4316" %}
